{% extends 'account/base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block styles %}
<!-- <link rel="stylesheet" href="{% static 'projects/styles/style.css' %}"> -->
{% endblock %}

{% block title %}Создание проекта{% endblock title %}

{% block content %}

<!-- {{ form }} -->
{% if user.is_superuser %}  
<main class="login-page">
    <div class="login-project-block">
        <h2>Регистрация</h2>
        <form method="post">
            {% csrf_token %}
            {{ form.non_field_errors }}
            <!-- <div>
                <label for="id_username">{{ form.username.label }}</label>
                {{ form.username }}
                {{ form.username.errors }}
            </div>
            <div>
                <label for="id_email">{{ form.email.label }}</label>
                {{ form.email }}
                {{ form.email.errors }}
            </div>
            <div>
                <label for="id_phone">{{ form.phone.label }}</label>
                {{ form.phone }}
                {{ form.phone.errors }}
            </div>
            <div>
                <label for="id_password1">{{ form.password1.label }}</label>
                {{ form.password1 }}
                {{ form.password1.errors }}
            </div>
            <div>
                <label for="id_password2">{{ form.password2.label }}</label>
                {{ form.password2 }}
                {{ form.password2.errors }}
            </div> -->
            {{ form.as_p }}
            <button class="btn btn-success" type="submit">Регистрация</button>
        </form>
    </div>

</main>
{% else %}
<h2>Вы не администратор. Авторизуйтесь как администратор.</h2>
{% if user.is_active %}
{{ user }}    
<a href="{% url 'user_all_projects' %}">Все проекты</a>
<form method="post" action="{% url 'logout' %}" style="display: inline;">
    {% csrf_token %}
    <button type="submit">Выйти</button>
</form> 
{% else %}
<h2>Анонимный пользователь</h2>
<a href="{% url 'user_all_projects' %}">Все проекты</a>
<a href="{% url 'login' %}">Страница авторизации</a>
{% endif %}
{% endif %}


{% if form.errors %}
    <ul>
        {% for field in form %}
            {% for error in field.errors %}
                <li>{{ field.label }}: {{ error }}</li>
            {% endfor %}
        {% endfor %}
        {% for error in form.non_field_errors %}
            <li>{{ error }}</li>
        {% endfor %}
    </ul>
{% endif %}

{% endblock content %}






